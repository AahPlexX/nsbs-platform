name: Move Extra Courses to deleteMe Folder

on:
  workflow_dispatch:

jobs:
  move-courses:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Create deleteMe folder and move unwanted courses
        run: |
          cd data/courses
          
          # Create deleteMe directory
          mkdir -p ../deleteMe
          
          # Keep only change-management-specialist-cms
          KEEP="change-management-specialist-cms"
          
          echo "ðŸ“¦ Moving unwanted courses to data/deleteMe/"
          echo ""
          
          for dir in */; do
            dirname="${dir%/}"
            if [ "$dirname" != "$KEEP" ]; then
              echo "Moving: $dirname â†’ ../deleteMe/$dirname"
              mv "$dirname" "../deleteMe/$dirname"
            else
              echo "âœ… Keeping: $dirname"
            fi
          done
          
          echo ""
          echo "âœ… Move complete!"
          echo ""
          echo "ðŸ“‚ Remaining in data/courses/:"
          ls -la
          echo ""
          echo "ðŸ“‚ Moved to data/deleteMe/:"
          ls -la ../deleteMe/
      
      - name: Commit changes
        run: |
          git config --local user.email "github-actions[bot]@users.noreply.github.com"
          git config --local user.name "github-actions[bot]"
          git add -A
          git commit -m "chore: move 47 unwanted courses to data/deleteMe/ folder for review
          
          - Kept: change-management-specialist-cms
          - Moved: 47 courses to data/deleteMe/
          - Ready for manual deletion after review"
          git push
